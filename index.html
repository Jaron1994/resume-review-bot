async function analyzeResume() {
    const jobTitle = document.getElementById("jobTitle").value;
    const feedbackDiv = document.getElementById("feedback");
    const loadingSpinner = document.getElementById("loadingSpinner");

    feedbackDiv.innerHTML = "⏳ Uploading and analyzing...";
    loadingSpinner.style.display = "block"; // Show the loading spinner

    try {
        const response = await fetch(https://script.google.com/macros/s/AKfycbx8czAm1R1W6TAnrWI-B579U9ecfSgLG8JITyf66YVx-8xfPeyg4oWf9RbhxZ9lT_Y4ig/exec, {
            method: "POST",
            mode: "cors",  // ✅ Enables cross-origin requests
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ pdfBase64, jobTitle })
        });

        if (!response.ok) {
            throw new Error(`HTTP Error! Status: ${response.status}`);
        }

        const data = await response.json();

        if (data.feedback) {
            feedbackDiv.innerHTML = `<strong>✔ Feedback:</strong> ${data.feedback}`;
        } else {
            throw new Error("Invalid response received. No feedback available.");
        }

    } catch (error) {
        console.error("Fetch Error:", error);
        feedbackDiv.innerHTML = "❌ An error occurred while processing the resume.";
        alert("Error: " + error.message);
    } finally {
        loadingSpinner.style.display = "none"; // Hide spinner after request completes
    }
}
