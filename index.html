async function analyzeResume() {
    const jobTitle = document.getElementById("jobTitle").value;
    const feedbackDiv = document.getElementById("feedback");
    const loadingSpinner = document.getElementById("loadingSpinner");

    feedbackDiv.innerHTML = "⏳ Uploading and analyzing...";
    loadingSpinner.style.display = "block"; // Show the loading spinner

    try {
        const response = await fetch("YOUR_NEW_GOOGLE_APPS_SCRIPT_WEB_URL", {
            method: "POST",
            mode: "cors",  // ✅ Enables cross-origin requests
            headers: { "Content-Type": "application/x-www-form-urlencoded" }, // ✅ Prevents preflight failure
            body: new URLSearchParams({ pdfBase64, jobTitle }) // ✅ Prevents preflight failure
        });

        if (!response.ok) {
            throw new Error(`HTTP Error! Status: ${response.status}`);
        }

        const data = await response.json();

        if (data.feedback) {
            feedbackDiv.innerHTML = `<strong>✔ Feedback:</strong> ${data.feedback}`;
        } else {
            throw new Error("Invalid response received. No feedback available.");
        }

    } catch (error) {
        console.error("Fetch Error:", error);
        feedbackDiv.innerHTML = "❌ An error occurred while processing the resume.";
        alert("Error: " + error.message);
    } finally {
        loadingSpinner.style.display = "none"; // Hide spinner after request completes
    }
}
